<!doctype html>
<html lang="ko"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
        
        <title>방역정보 업데이트</title>
        <style>
            h2{
                margin: 50px;
            }
            fieldset{
                margin: 50px;
            }

        </style>
    </head>
    <body>
      <th:block th:replace="fragments/header :: header"></th:block>
      <br>
        <h2>방역 정보 업데이트</h2>
        <table border="0" style="height: auto; width: 98%; margin: 10px 10px 10px 20px; padding: 10px 10px 10px 10px;">
          <tr>
            <td style="border-top: 1px solid grey; margin: 10px 10px 10px 20px; padding: 10px 10px 10px 10px;">
                <br>
                <h3>최근 방역 정보</h3>
                <br>
                <strong>최근 방역 날짜</strong><br>
                <input type="date" id="quarantine_date">
                <br><br>
            </td>
          </tr>


          <tr>
            <td style="border-top: 1px solid grey; border-bottom: 1px solid grey; margin: 10px 10px 10px 20px; padding: 10px 10px 10px 10px;">
                <br>
                <h3>위생 관리 정보</h3>
                <br>
                <strong>손소독 여부</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="checkbox" name="hand" id="hand_sanitization">
                <br><br>
                <strong>발열체크 여부</strong>&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="checkbox" name="heat" id="heat_check">
                <br><br>
                <strong>마스크 착용</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <input type="checkbox" name="mask" id="wearing_mask">
                <br><br>
                <strong>거리두기 여부</strong>&nbsp;&nbsp;&nbsp;&nbsp;
                <select name="distance" id="distance" size="1" style="height: 30px; width: 200px;">
                    <option value="10" selected>~ 10m 이내</option>
                    <option value="20">10m ~ 20m 이내</option>
                    <option value="30">20m ~ 30m 이내</option>
                    <option value="40">30m ~ 40m 이내</option>
                    <option value="50">40m ~ 50m 이내</option>
                </select>
                <br><br>
            </td>
          </tr>
        
        </table>
        <button class="btn btn-outline-primary" id="placeUpdateBtn" type="submit" style="float: right; width: 90px; margin: 10px 50px 10px 20px; padding: 10px 10px 10px 10px;">수정</button>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>

        <script>
            $(document).ready(function() {
                $("#placeUpdateBtn").on("click", function () {
                    var bodyObject = {
                        place: {
                            name: $("#place_name").val(),
                            address: $("#place_address").val(),
                            phone: $("#place_phone").val(),
                            //img_url: $("#userBirthday").val(),
                            // TODO category
                        },
                        quarantine: {
                            datetime: $("#quarantine_date").val(),
                        },
                        hygieneManagement: {
                            handSanitization: $("#hand_sanitization").is(":checked"),
                            heatCheck: $("#heat_check").is(":checked"),
                            wearingMask: $("#wearing_mask").is(":checked"),
                            distance: $("#distance").val(),
                        }
                    }

                    $.ajax({
                        type:"POST",
                        url: "/places",
                        data: JSON.stringify(bodyObject),
                        contentType:"application/json; charset=UTF-8",
                        success: function () {
                            alert("Created");
                        },
                        error: function (xhr, textStatus, error) {
                            alert("code:"+xhr.status+"\n"
                                +"message:"+xhr.responseText+"\n"
                                +"error:"+error
                            );
                        }
                    });
                });
            });
        </script>
      </body>
    
</html>